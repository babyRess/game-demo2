System.register("chunks:///_virtual/GameSpinController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HightLight.ts","./Listener.ts"],(function(t){"use strict";var n,i,e,r,s,o,a,h,l,u,p,c,d,g,f,I,v,S,m,b;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.createClass,r=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,h=t.UITransform,l=t.Node,u=t.Prefab,p=t.input,c=t.Input,d=t.error,g=t.KeyCode,f=t.Vec3,I=t.tween,v=t.instantiate,S=t.Component},function(t){m=t.HightLight},function(t){b=t.Listener}],execute:function(){var w,y,x,N,L,P,O,z,C,R,D;o._RF.push({},"6e711VM6G1DgqHPI1j8uMZU","GameSpinController",void 0);var T,H=a.ccclass,M=a.property;!function(t){t[t.Running=0]="Running",t[t.Stopping=1]="Stopping",t[t.Idle=2]="Idle"}(T||(T={}));t("GameSpinController",(w=H("GameSpinController"),y=M([m]),x=M(h),N=M(l),L=M([u]),w((z=n((O=function(t){function n(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return n=t.call.apply(t,[this].concat(e))||this,r(n,"hightlights",z,s(n)),r(n,"gridTransform",C,s(n)),r(n,"gridNode",R,s(n)),n.spinSpeed=1,n.spinInterval=void 0,n.slotInterval=void 0,n.currentIndex=0,n.lastKeyPressTime=0,n.debounceDelay=300,n.gameState=T.Idle,n.winListener=new b,r(n,"spritesPrefab",D,s(n)),n}i(n,t);var o=n.prototype;return o.start=function(){p.on(c.EventType.KEY_DOWN,this.onKeyDown,this),this.WinListener.AddListener(this.onWinNumber.bind(this)),this.startSpawn()},o.onWinNumber=function(t){d("Win number: "+t)},o.spawnRandom=function(t){var n=Math.floor(Math.random()*t.length);this.InstantiateNode(t[n],this.gridNode)},o.spawnByIndex=function(t){this.InstantiateNode(this.spritesPrefab[t],this.gridNode)},o.startSpawn=function(){d("startSpawn");for(var t=0;t<3;t++)this.spawnRandom(this.spritesPrefab)},o.onKeyDown=function(t){if(t.keyCode==g.SPACE)switch(this.gameState){case T.Running:if(!this.slotInterval)return;this.gameState=T.Stopping,this.OnStop(),this.OnStopSlot();break;case T.Idle:this.gameState=T.Running,this.OnSpin(),this.PlaySlot()}},o.test=function(){d("test")},o.PlaySlot=function(){var t=this,n=this.gridNode.position.clone(),i=new f(n.x,n.y+100,n.z),e=new f(n.x,n.y-200,n.z);I(this.gridNode).to(.2,{position:i},{easing:"sineInOut"}).to(.2,{position:e},{easing:"sineInOut"}).delay(.4).call((function(){t.slotInterval=setInterval(function(){this.spawnRandom(this.spritesPrefab),this.spin()}.bind(t),100)})).start()},o.OnSpin=function(){var t=this;setTimeout((function(){t.spinSpeed=3}),1e3),this.spinInterval=setInterval(function(){this.hightlights[this.currentIndex].HightLight(this.spinSpeed),this.currentIndex++,this.currentIndex>=this.hightlights.length&&(this.currentIndex=0)}.bind(this),100/this.spinSpeed)},o.OnStop=function(){var t=1;clearInterval(this.spinInterval);var n=setInterval(function(){if(t>6)return this.hightlights[this.currentIndex].HightLightEND(),this.isRunning=!1,this.spinSpeed=1,void clearInterval(n);this.hightlights[this.currentIndex].HightLight(this.spinSpeed/t),this.currentIndex++,t++,this.currentIndex>=this.hightlights.length&&(this.currentIndex=0)}.bind(this),this.LerpEaseOutBack(100/this.spinSpeed,300,t/6))},o.OnStopSlot=function(){var t=this;clearInterval(this.slotInterval);for(var n=(this.currentIndex+6)%this.spritesPrefab.length,i=this.gridNode.position.clone(),e=0;e<6;e++)4==e?this.spawnByIndex(n):this.spawnRandom(this.spritesPrefab);var r=new f(i.x,-(this.gridTransform.height+900)-80,i.z),s=new f(r.x,r.y+100,r.z);I(this.gridNode).to(1.8,{position:r},{easing:"sineInOut"}).to(1,{position:s},{easing:"sineInOut"}).call((function(){t.gameState=T.Idle,t.slotInterval=null})).start()},o.spin=function(){var t=this.gridNode.position.clone(),n=new f(t.x,t.y-150,t.z);I(this.gridNode).to(.1,{position:n},{easing:"sineInOut"}).start()},o.LerpEaseOutBack=function(t,n,i){return t+(i=function(t){var n=1.70158;return 1+2.70158*Math.pow(t-1,3)+n*Math.pow(t-1,2)}(i))*(n-t)},o.InstantiateNode=function(t,n){d("InstantiateNode");var i=v(t);i.getComponent(h).width=150,i.getComponent(h).height=150,i.parent=n},o.Sleep=function(t){return new Promise((function(n,i){setTimeout((function(){n()}),t)}))},e(n,[{key:"WinListener",get:function(){return this.winListener}}]),n}(S)).prototype,"hightlights",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=n(O.prototype,"gridTransform",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=n(O.prototype,"gridNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=n(O.prototype,"spritesPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=O))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/HightLight.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,n,o,s,c,a,u,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){c=t.cclegacy,a=t._decorator,u=t.Sprite,h=t.Color,p=t.Component}],execute:function(){var l,g,f,y,v;c._RF.push({},"ba4319GhmNG8ZAUjfTP98p9","HightLight",void 0);var L=a.ccclass,H=a.property;t("HightLight",(l=L("HightLight"),g=H(u),l((v=e((y=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,r(e,"sprite",v,n(e)),e.index=-1,e}i(e,t);var c=e.prototype;return c.HightLight=function(){var t=o(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.sprite.color=new h(255,255,255,255),t.next=3,this.Sleep(100/e);case 3:this.DisableHightLight();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),c.HightLightEND=function(){this.sprite.color=new h(255,255,255,255)},c.DisableHightLight=function(){this.sprite.color=new h(80,80,80,255)},c.Sleep=function(t){var e=this;return new Promise((function(i,r){setTimeout((function(){e.node&&i()}),t)}))},e}(p)).prototype,"sprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));c._RF.pop()}}}));

System.register("chunks:///_virtual/Listener.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,n,c,o;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime,n=e.createForOfIteratorHelperLoose},function(e){c=e.cclegacy,o=e._decorator}],execute:function(){var s;c._RF.push({},"a74d04iOQxBSpe/oabcWfQW","Listener",void 0);var a=o.ccclass;o.property,e("Listener",a("Listener")(s=function(){function e(){this.callbacks=new Array}var c=e.prototype;return c.AddListener=function(e){this.callbacks.push(e)},c.Invoke=function(){var e=r(t().mark((function e(r){var c,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=n(this.callbacks);!(o=c()).done;)(0,o.value)(r);case 1:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),e}())||s);c._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameSpinController.ts","./HightLight.ts","./Listener.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});