System.register("chunks:///_virtual/GameSpinController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HightLight.ts","./Listener.ts"],(function(t){"use strict";var n,i,e,r,s,o,a,h,u,p,c,l,d,g,f,v,I,w,m,y,b,S;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.createClass,r=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){h=t.cclegacy,u=t._decorator,p=t.UITransform,c=t.Node,l=t.Prefab,d=t.input,g=t.Input,f=t.error,v=t.KeyCode,I=t.Vec3,w=t.tween,m=t.instantiate,y=t.Component},function(t){b=t.HightLight},function(t){S=t.Listener}],execute:function(){var x,N,L,P,O,z,C,R,T,D,k;h._RF.push({},"6e711VM6G1DgqHPI1j8uMZU","GameSpinController",void 0);var H=u.ccclass,M=u.property;t("GameSpinController",(x=H("GameSpinController"),N=M([b]),L=M(p),P=M(c),O=M([l]),x((R=n((C=function(t){function n(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return n=t.call.apply(t,[this].concat(e))||this,r(n,"hightlights",R,s(n)),r(n,"gridTransform",T,s(n)),r(n,"gridNode",D,s(n)),n.spinSpeed=1,n.spinInterval=void 0,n.slotInterval=void 0,n.currentIndex=0,n.isRunning=!1,n.winListener=new S,r(n,"spritesPrefab",k,s(n)),n}i(n,t);var h=n.prototype;return h.start=function(){d.on(g.EventType.KEY_DOWN,this.onKeyDown,this),this.WinListener.AddListener(this.onWinNumber.bind(this))},h.onWinNumber=function(t){f("Win number: "+t)},h.onLoad=function(){this.startSpawn()},h.spawnRandom=function(t){var n=Math.floor(Math.random()*t.length);this.InstantiateNode(t[n],this.gridNode)},h.spawnByIndex=function(t){this.InstantiateNode(this.spritesPrefab[t],this.gridNode)},h.startSpawn=function(){for(var t=0;t<3;t++)this.spawnRandom(this.spritesPrefab)},h.onKeyDown=function(t){t.keyCode==v.SPACE&&(this.isRunning?(this.OnStop(),this.OnStopSlot()):(this.OnSpin(),this.PlaySlot(),this.isRunning=!0))},h.PlaySlot=function(){var t=o(a().mark((function t(){var n,i,e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.gridNode.position.clone(),i=new I(n.x,n.y+100,n.z),e=new I(n.x,n.y-200,n.z),w(this.gridNode).to(.2,{position:i},{easing:"sineInOut"}).to(.2,{position:e},{easing:"sineInOut"}).start(),t.next=6,this.Sleep(400);case 6:this.slotInterval=setInterval(function(){this.spawnRandom(this.spritesPrefab),this.spin()}.bind(this),100);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),h.OnSpin=function(){var t=o(a().mark((function t(){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout((function(){n.spinSpeed=3}),1e3),this.spinInterval=setInterval(function(){this.hightlights[this.currentIndex].HightLight(this.spinSpeed),this.currentIndex++,this.currentIndex>=this.hightlights.length&&(this.currentIndex=0)}.bind(this),100/this.spinSpeed);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),h.OnStop=function(){var t=1;clearInterval(this.spinInterval);var n=setInterval(function(){if(t>6)return this.hightlights[this.currentIndex].HightLightEND(),this.isRunning=!1,this.spinSpeed=1,void clearInterval(n);this.hightlights[this.currentIndex].HightLight(this.spinSpeed/t),this.currentIndex++,t++,this.currentIndex>=this.hightlights.length&&(this.currentIndex=0)}.bind(this),this.LerpEaseOutBack(100/this.spinSpeed,300,t/6))},h.OnStopSlot=function(){var t=(this.currentIndex+6)%this.spritesPrefab.length,n=this.gridNode.position.clone();clearInterval(this.slotInterval);for(var i=0;i<6;i++)4==i?this.spawnByIndex(t):this.spawnRandom(this.spritesPrefab);var e=new I(n.x,-(this.gridTransform.height+900)-80,n.z),r=new I(e.x,e.y+100,e.z);w(this.gridNode).to(1.8,{position:e},{easing:"sineInOut"}).to(1,{position:r},{easing:"sineInOut"}).start()},h.spin=function(){var t=this.gridNode.position.clone(),n=new I(t.x,t.y-150,t.z);w(this.gridNode).to(.1,{position:n},{easing:"sineInOut"}).start()},h.LerpEaseOutBack=function(t,n,i){return t+(i=function(t){var n=1.70158;return 1+2.70158*Math.pow(t-1,3)+n*Math.pow(t-1,2)}(i))*(n-t)},h.InstantiateNode=function(t,n){var i=m(t);i.getComponent(p).width=150,i.getComponent(p).height=150,i.parent=n},h.Sleep=function(t){return new Promise((function(n,i){setTimeout((function(){n()}),t)}))},e(n,[{key:"WinListener",get:function(){return this.winListener}}]),n}(y)).prototype,"hightlights",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=n(C.prototype,"gridTransform",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=n(C.prototype,"gridNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=n(C.prototype,"spritesPrefab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=C))||z));h._RF.pop()}}}));

System.register("chunks:///_virtual/HightLight.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,n,o,s,c,a,u,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){c=t.cclegacy,a=t._decorator,u=t.Sprite,h=t.Color,p=t.Component}],execute:function(){var l,g,f,y,v;c._RF.push({},"ba4319GhmNG8ZAUjfTP98p9","HightLight",void 0);var L=a.ccclass,H=a.property;t("HightLight",(l=L("HightLight"),g=H(u),l((v=e((y=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,r(e,"sprite",v,n(e)),e.index=-1,e}i(e,t);var c=e.prototype;return c.HightLight=function(){var t=o(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.sprite.color=new h(255,255,255,255),t.next=3,this.Sleep(100/e);case 3:this.DisableHightLight();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),c.HightLightEND=function(){this.sprite.color=new h(255,255,255,255)},c.DisableHightLight=function(){this.sprite.color=new h(80,80,80,255)},c.Sleep=function(t){var e=this;return new Promise((function(i,r){setTimeout((function(){e.node&&i()}),t)}))},e}(p)).prototype,"sprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));c._RF.pop()}}}));

System.register("chunks:///_virtual/Listener.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,n,c,o;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime,n=e.createForOfIteratorHelperLoose},function(e){c=e.cclegacy,o=e._decorator}],execute:function(){var s;c._RF.push({},"a74d04iOQxBSpe/oabcWfQW","Listener",void 0);var a=o.ccclass;o.property,e("Listener",a("Listener")(s=function(){function e(){this.callbacks=new Array}var c=e.prototype;return c.AddListener=function(e){this.callbacks.push(e)},c.Invoke=function(){var e=r(t().mark((function e(r){var c,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=n(this.callbacks);!(o=c()).done;)(0,o.value)(r);case 1:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),e}())||s);c._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameSpinController.ts","./HightLight.ts","./Listener.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});